<section *ngIf="cardShow" class="z-50 fixed inset-0 bg-[#514c4c78] opacity-100 flex justify-center items-center ">
    <div data-aos="zoom-out" data-aos-duration="500"
        class="w-full h-full md:w-1/2 py-8 flex items-center justify-center transition-opacity duration-300 ease-in-out">
        <div class="flex flex-col p-5 rounded-lg shadow bg-white">
            <div class="bg-white">
                <div class="flex flex-wrap bg-gray-100 shadow-md rounded-xl">

                    <div class="w-1/3">

                        <div class="border border-gray-300 flex justify-center items-center">
                            <img src="assets/img/otsukalogo.png" height="200px" width="200px" alt="Otsuka Logo"
                                class="p-4 w-50 h-50 object-contain">
                        </div>



                        <div class="border border-gray-300 text-gray-800 object-fill flex text-center justify-center">
                            <p class="flex-1">Department Produksi</p>
                        </div>
                    </div>


                    <div class="w-2/3 text-gray-800 border border-gray-300 mx-auto flex items-center justify-center">
                        <p class="font-bold">REPORT KARTU RIWAYAT MESIN</p>
                    </div>


                    <div class="text-gray-800 py-8 px-2 w-1/3">
                        Tanggal : {{cardData[0].actual_start | date: 'dd-MM-yyyy'}}
                    </div>

                    <div class="text-gray-800 py-8 px-2 w-1/3">
                        Section : {{cardData[0].section}}
                    </div>

                    <div class="text-gray-800 py-8 px-2 w-1/3">
                        PIC : {{cardData[0].executor}}
                    </div>

                    <div class="text-gray-800 py-8 px-2 w-2/4 flex border border-gray-300">
                        <div class="w-full">
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">
                                <div class="w-1/3">
                                    Issue / Activity
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].desc}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Component Category
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Machine
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].machine}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Equipment No.
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].func_loc}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Root Cause
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    Root Cause
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">
                                <div class="w-1/3">
                                    CAPA
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].desc}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Change Part ?
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    <div *ngIf="cardData[0].kode_part == ''"
                                        class="text-gray-800 py-2 px-2">
                                        NO
                                    </div>
                                    <div *ngIf="cardData[0].kode_part != ''"
                                        class="text-gray-800 py-2 px-2">
                                        YES
                                    </div>
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    No. Work Order
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].no_wo}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    No. Parts
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    {{cardData[0].kode_part}}
                                </div>
                            </div>
                            <div class="flex text-gray-800 py-2 px-2 border border-gray-300">

                                <div class="w-1/3">
                                    Status
                                </div>
                                <div class="w-1/3">
                                    :
                                </div>
                                <div class="w-1/2">
                                    
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="text-gray-800 text-center py-8 px-2 border border-gray-300 w-2/4">

                        <div class="w-full">
                            Picture
                        </div>
                        <div class="text-gray-800 text-center py-8 px-2 border border-gray-300 w-4/4">
                            <img src="http://192.168.9.47/plan_am/files/{{cardData[0].foto}}" class="center" style="width: 500px;;
                height: auto;">
                        </div>
                    </div>

                </div>

            </div>
            <div class="flex items-center mt-3">

                <button (click)="cardClose()"
                    class="flex-1 px-4 py-2 ml-2 bg-red-500 hover:bg-red-600 duration-300 text-white text-sm font-medium rounded-md">
                    Close

                </button>
            </div>

        </div>
    </div>
</section>

<section *ngIf="imagePopUp" class="fixed z-50 inset-0 bg-[#514c4c35] opacity-100 flex justify-center items-center">
    <div data-aos="zoom-in" data-aos-duration="500"
        class="w-full h-full md:w-1/2 py-8 flex items-center justify-center transition-opacity duration-300 ease-in-out">
        <div class="flex flex-col p-5 rounded-lg shadow bg-white">
            <div class="flex flex-col items-center text-center">
                <img src="http://192.168.9.47/plan_am/files/{{imageUrl}}" class="center" style="width: 700px;;
                height: auto;">
            </div>
            <!-- <h1 class="mt-2 font-semibold text-gray-800 text-2xl">Warning!</h1>
                <p class="mt-2 text-sm text-gray-600 leading-relaxed">Are you sure you want to delete this? This action
                    cannot be undone</p> -->

            <div class="flex items-center mt-3">
                <button (click)="cancelPopUp()"
                    class="flex-1 px-4 py-2 ml-2 bg-gray-200 hover:bg-red-700 duration-200 text-gray-600 hover:text-gray-100 text-sm font-medium rounded-md">
                    Close
                </button>
            </div>
        </div>
    </div>
</section>

<div class="lg:pl-72 max-sm:pl-6 md:pl-6 pr-6">
    <div [style.visibility]="(resolved === false) ? 'hidden' : 'visible' ">
        <div class="relative flex flex-col mb-4 min-w-0 break-words bg-white shadow-soft-lg rounded-2xl bg-clip-border">
            <div class="flex-auto p-1">
                <div class="wrapper">
                    <h5 class="typing-demo font-bold">KRM Dashboard
                    </h5>
                </div>
            </div>
        </div>

        <div data-aos="fade-down" data-aos-duration="1500" class="relative flex flex-col mb-4 min-w-0">
            <div class="flex flex-wrap -mx-3">
                <div class="w-full mt-1 max-w-full px-3 lg-max:mt-6">
                    <div
                        class="relative flex flex-col h-full min-w-0 break-words bg-white border-0 shadow-soft-xl rounded-2xl bg-clip-border">
                        <div class="flex-auto p-4">
                            <div class="flex justify-start py-4">
                                <div (click)="filterButton()"
                                    class="w-12 h-12 rounded-lg px-4 bg-gray-200 text-gray-400">
                                    <svg class="cursor-pointer pr-2 h-8 w-8 mr-8 mt-2" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M21 6H19M21 12H16M21 18H16M7 20V13.5612C7 13.3532 7 13.2492 6.97958 13.1497C6.96147 13.0615 6.93151 12.9761 6.89052 12.8958C6.84431 12.8054 6.77934 12.7242 6.64939 12.5617L3.35061 8.43826C3.22066 8.27583 3.15569 8.19461 3.10948 8.10417C3.06849 8.02393 3.03853 7.93852 3.02042 7.85026C3 7.75078 3 7.64677 3 7.43875V5.6C3 5.03995 3 4.75992 3.10899 4.54601C3.20487 4.35785 3.35785 4.20487 3.54601 4.10899C3.75992 4 4.03995 4 4.6 4H13.4C13.9601 4 14.2401 4 14.454 4.10899C14.6422 4.20487 14.7951 4.35785 14.891 4.54601C15 4.75992 15 5.03995 15 5.6V7.43875C15 7.64677 15 7.75078 14.9796 7.85026C14.9615 7.93852 14.9315 8.02393 14.8905 8.10417C14.8443 8.19461 14.7793 8.27583 14.6494 8.43826L11.3506 12.5617C11.2207 12.7242 11.1557 12.8054 11.1095 12.8958C11.0685 12.9761 11.0385 13.0615 11.0204 13.1497C11 13.2492 11 13.3532 11 13.5612V17L7 20Z"
                                            stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                </div>

                                <div (click)="resetFilter()"
                                    class="w-12 h-12 ml-2 rounded-lg px-4 bg-gray-200 text-gray-400">
                                    <svg class="cursor-pointer pr-4 h-8 w-8 mr-10 mt-2" viewBox="0 0 24 24" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M10.0303 8.96967C9.73741 8.67678 9.26253 8.67678 8.96964 8.96967C8.67675 9.26256 8.67675 9.73744 8.96964 10.0303L10.9393 12L8.96966 13.9697C8.67677 14.2626 8.67677 14.7374 8.96966 15.0303C9.26255 15.3232 9.73743 15.3232 10.0303 15.0303L12 13.0607L13.9696 15.0303C14.2625 15.3232 14.7374 15.3232 15.0303 15.0303C15.3232 14.7374 15.3232 14.2625 15.0303 13.9697L13.0606 12L15.0303 10.0303C15.3232 9.73746 15.3232 9.26258 15.0303 8.96969C14.7374 8.6768 14.2625 8.6768 13.9696 8.96969L12 10.9394L10.0303 8.96967Z"
                                            fill="currentColor" />
                                        <path
                                            d="M12.0574 1.25H11.9426C9.63424 1.24999 7.82519 1.24998 6.41371 1.43975C4.96897 1.63399 3.82895 2.03933 2.93414 2.93414C2.03933 3.82895 1.63399 4.96897 1.43975 6.41371C1.24998 7.82519 1.24999 9.63422 1.25 11.9426V12.0574C1.24999 14.3658 1.24998 16.1748 1.43975 17.5863C1.63399 19.031 2.03933 20.1711 2.93414 21.0659C3.82895 21.9607 4.96897 22.366 6.41371 22.5603C7.82519 22.75 9.63423 22.75 11.9426 22.75H12.0574C14.3658 22.75 16.1748 22.75 17.5863 22.5603C19.031 22.366 20.1711 21.9607 21.0659 21.0659C21.9607 20.1711 22.366 19.031 22.5603 17.5863C22.75 16.1748 22.75 14.3658 22.75 12.0574V11.9426C22.75 9.63423 22.75 7.82519 22.5603 6.41371C22.366 4.96897 21.9607 3.82895 21.0659 2.93414C20.1711 2.03933 19.031 1.63399 17.5863 1.43975C16.1748 1.24998 14.3658 1.24999 12.0574 1.25ZM3.9948 3.9948C4.56445 3.42514 5.33517 3.09825 6.61358 2.92637C7.91356 2.75159 9.62177 2.75 12 2.75C14.3782 2.75 16.0864 2.75159 17.3864 2.92637C18.6648 3.09825 19.4355 3.42514 20.0052 3.9948C20.5749 4.56445 20.9018 5.33517 21.0736 6.61358C21.2484 7.91356 21.25 9.62177 21.25 12C21.25 14.3782 21.25 16.0864 21.0736 17.3864C20.9018 18.6648 20.5749 19.4355 20.0052 20.0052C19.4355 20.5749 18.6648 20.9018 17.3864 21.0736C16.0864 21.2484 14.3782 21.25 12 21.25C9.62177 21.25 7.91356 21.2484 6.61358 21.0736C5.33517 20.9018 4.56445 20.5749 3.9948 20.0052C3.42514 19.4355 3.09825 18.6648 2.92637 17.3864C2.75159 16.0864 2.75 14.3782 2.75 12C2.75 9.62177 2.75159 7.91356 2.92637 6.61358C3.09825 5.33517 3.42514 4.56445 3.9948 3.9948Z"
                                            fill="currentColor" />
                                    </svg>
                                </div>

                                <div
                                    class="w-16 h-14 rounded-full hover:w-full duration-500 px-2 relative text-gray-400 focus-within:text-cyan-500 block">
                                    <svg class="cursor-pointer pointer-events-none w-8 h-8 absolute pt-2 pl-2 top-1 transform left-3"
                                        viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z"
                                            fill="none" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    <input type="text"
                                        class="pl-12 appearance-none block w-full bg-gray-200 text-gray-700 border rounded-lg border-gray-200 py-3.5 leading-tight focus:outline-none focus:border-gray-300"
                                        placeholder="Search here..." name="search" [(ngModel)]="searchtext" />
                                </div>
                            </div>

                            <div data-aos="fade-down" *ngIf="filter">
                                <div class="flex flex-wrap -mx-3 mb-6">
                                    <div class="w-1/2 px-3">
                                        <label
                                            class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                                            for="grid-password">
                                            Area | selected area => {{area}}
                                        </label>
                                        <!-- component -->
                                        <div class="grid w-[20rem] grid-cols-3 gap-2 rounded-xl bg-gray-200 p-2"
                                            (change)="areaFilter()">
                                            <div>
                                                <input type="radio" id="1" value="1" name="area" class="peer hidden"
                                                    [(ngModel)]="area" />
                                                <label for="1"
                                                    class="block cursor-pointer text-gray-500 select-none rounded-lg p-2 text-center peer-checked:bg-blue-500 duration-200 peer-checked:font-bold peer-checked:text-white">OCI
                                                    1</label>
                                            </div>
                                            <div>
                                                <input type="radio" id="2" value="2" name="area" class="peer hidden"
                                                    [(ngModel)]="area" />
                                                <label for="2"
                                                    class="block cursor-pointer text-gray-500 select-none rounded-lg p-2 text-center peer-checked:bg-blue-500 duration-200 peer-checked:font-bold peer-checked:text-white">OCI
                                                    2</label>
                                            </div>
                                            <div>
                                                <input type="radio" id="3" value="3" name="area" class="peer hidden"
                                                    [(ngModel)]="area" />
                                                <label for="3"
                                                    class="block cursor-pointer text-gray-500 select-none rounded-lg p-2 text-center peer-checked:bg-blue-500 duration-200 peer-checked:font-bold peer-checked:text-white">FSB</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div data-aos="fade-down" *ngIf="sectionShow" class="flex flex-wrap -mx-3 mb-6">
                                    <div class="w-full px-3">
                                        <label
                                            class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2"
                                            for="grid-password">
                                            Section | selected section => {{section}}
                                        </label>
                                        <!-- component -->
                                        <div [ngClass]=" isOc
                                        ? ' grid-cols-7 w-[90rem]'
                                        : ' grid-cols-5 w-[50rem]'
                                      " class="grid py-4 gap-2 rounded-xl bg-gray-200 p-2">
                                            <div *ngFor="let data of sectionFiltered" (change)="sectionFilter()">
                                                <div>
                                                    <input type="radio" id="{{data.section}}" value="{{data.section}}"
                                                        name="section" class="peer hidden" [(ngModel)]="section" />
                                                    <label for="{{data.section}}"
                                                        class="block cursor-pointer text-gray-500 select-none rounded-lg p-2 text-center peer-checked:bg-blue-500 duration-200 peer-checked:font-bold peer-checked:text-white">{{data.section}}
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-400 text-center">
                                    <tr>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            No WO
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Area
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Section
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Description
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Tanggal Perbaikan
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Proses Perbaikan
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Foto
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Executor
                                        </th>
                                        <th scope="col" class="py-3 px-6 text-white" bgcolor="#878790">
                                            Action
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-white border-b Success:bg-gray-900 Success:border-gray-700"
                                        *ngFor="let data of krmList | filter:searchtext | paginate: { id:'pagination', currentPage: currentPage, itemsPerPage: 5 }; let i = index ">
                                        <!-- <th scope="row" class="py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                          {{data.no_wo}}
                        </th> -->
                                        <td class="py-4 px-6">
                                            {{data.no_wo}}
                                        </td>
                                        <td class="py-4 px-6 whitespace-nowrap">
                                            {{data.area}}
                                        </td>
                                        <td class="py-4 px-6">
                                            {{data.section}}
                                        </td>
                                        <td class="py-4 px-6">
                                            {{data.desc}}
                                        </td>
                                        <td class="py-4 px-6">
                                            {{data.tanggal_perbaikan | date:'dd-MM-yyyy'}}
                                        </td>
                                        <td class="py-4 px-6" [innerHTML]="data.proses_perbaikan">
                                            {{data.proses_perbaikan}}
                                        </td>
                                        <td class="py-4 px-6">
                                            <img (click)="imageOpen(data.foto)"
                                                src="http://192.168.9.47/plan_am/files/{{data.foto}}"
                                                class="cursor-pointer center object-cover w-full aspect-square hover:scale-110 transition duration-300 ease-in-out">
                                        </td>
                                        <td class="py-4 px-6">
                                            {{data.employee_name}}
                                        </td>
                                        <td class="py-4 px-6">
                                            <div (click)="cardOpen(data.id)"
                                                class="cursor-pointer text-slate-800 transform transition-transform duration-300 hover:text-sky-500 hover:scale-110">
                                                <svg width="35px" height="35px" viewBox="0 0 24 24" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M22 13V12C22 8.2276 22 6.34315 20.8284 5.17157C19.6569 4 17.7712 4 14 4H10C6.22876 4 4.34315 4 3.17157 5.17157C2 6.34315 2 8.22876 2 12C2 15.7712 2 17.6569 3.17157 18.8284C4.34315 20 6.22876 20 10 20H13"
                                                        stroke="currentColor" stroke-width="1.5"
                                                        stroke-linecap="round" />
                                                    <path d="M10 16H6" stroke="currentColor" stroke-width="1.5"
                                                        stroke-linecap="round" />
                                                    <path d="M2 10L22 10" stroke="currentColor" stroke-width="1.5"
                                                        stroke-linecap="round" />
                                                    <circle cx="18" cy="17" r="3" stroke="currentColor"
                                                        stroke-width="1.5" />
                                                    <path d="M20.5 19.5L21.5 20.5" stroke="currentColor"
                                                        stroke-width="1.5" stroke-linecap="round" />
                                                </svg>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <pagination-controls class="text-center" id="pagination" (pageChange)="currentPage = $event">
                        </pagination-controls>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div [style.visibility]="(resolved === true) ? 'hidden' : 'visible' ">
    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="fire">
        <p style="font-size: 20px; color: white">{{deskripsi}}</p>
    </ngx-spinner>
</div>